events { 
   worker_connections 1024; 
}
http {
   upstream localhost {
      # These are references to our backend containers, facilitated by
      # Compose, as defined in docker-compose.yml   
      server server1:3001;
      server server2:3001;
      server server3:3001;
   }
   server {
      listen 8000;
      server_name 18.223.35.23;
      location / {
         proxy_pass http://172.31.34.136;
         proxy_http_version 1.1;
         proxy_set_header Upgrade $http_upgrade;
         proxy_set_header Connection 'upgrade';
         proxy_set_header Host $host;
         proxy_cache_bypass $http_upgrade;
      }
   }
}